# Vue3 Super Tree

[![npm version](https://badge.fury.io/js/vue3-super-tree.svg)](https://badge.fury.io/js/vue3-super-tree)
[![npm downloads](https://img.shields.io/npm/dm/vue3-super-tree.svg)](https://www.npmjs.com/package/vue3-super-tree)
[![GitHub license](https://img.shields.io/github/license/zuoanCo/vue3-super-tree.svg)](https://github.com/zuoanCo/vue3-super-tree/blob/main/LICENSE)
[![TypeScript](https://img.shields.io/badge/TypeScript-Ready-blue.svg)](https://www.typescriptlang.org/)
[![Build Status](https://img.shields.io/badge/Build-Passing-brightgreen.svg)](https://github.com/zuoanCo/vue3-super-tree)
[![Production Ready](https://img.shields.io/badge/Production-Ready-green.svg)](https://github.com/zuoanCo/vue3-super-tree)

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€é«˜åº¦å¯å®šåˆ¶çš„ Vue 3 æ ‘å½¢ç»„ä»¶ npm åŒ…ï¼Œå®Œå…¨å¤åˆ» PrimeVue Tree çš„åŠŸèƒ½ç‰¹æ€§ï¼Œæ”¯æŒæ‹–æ‹½ã€å¤šé€‰ã€é”®ç›˜å¯¼èˆªç­‰é«˜çº§åŠŸèƒ½ã€‚

## ğŸ“„ åè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT åè®®](./LICENSE) å¼€æºï¼Œæ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬é¡¹ç›®ã€‚

## ğŸ†• v1.4.1 æ›´æ–°äº®ç‚¹

### ğŸ› æ¼”ç¤ºé¡µé¢æ‹–æ‹½åŠŸèƒ½ä¿®å¤
- **ä¿®å¤ TreeDemo.vue æ‹–æ‹½æ’åºåŠŸèƒ½** - ä¸ºæ‹–æ‹½æ’åºçš„ Tree ç»„ä»¶æ·»åŠ äº†ç¼ºå°‘çš„ `:dragdrop="true"` å±æ€§
- **ä¿®å¤ TreeDemo.vue è·¨æ ‘æ‹–æ‹½åŠŸèƒ½** - ä¸ºè·¨æ ‘æ‹–æ‹½çš„ä¸¤ä¸ª Tree ç»„ä»¶æ·»åŠ äº† `:dragdrop="true"` å’Œ `:crossTreeAutoUpdate="false"` å±æ€§
- **ç¡®ä¿æ¼”ç¤ºåŠŸèƒ½æ­£å¸¸å·¥ä½œ** - ä¿®å¤äº†æ¼”ç¤ºé¡µé¢ä¸­æ‹–æ‹½åŠŸèƒ½çš„é…ç½®é—®é¢˜ï¼Œç”¨æˆ·ç°åœ¨å¯ä»¥æ­£å¸¸ä½“éªŒæ‰€æœ‰æ‹–æ‹½ç‰¹æ€§
- **é…ç½®ä¸€è‡´æ€§** - ç»Ÿä¸€äº†æ‹–æ‹½ç›¸å…³å±æ€§çš„é…ç½®ï¼Œç¡®ä¿æ–‡æ¡£ç¤ºä¾‹ä¸å®é™…ä»£ç ä¿æŒä¸€è‡´

## ğŸ†• v1.4.0 æ›´æ–°äº®ç‚¹

### ğŸ”§ æ„å»ºç¨³å®šæ€§å¤§å¹…æå‡
- **44ä¸ªæ„å»ºé”™è¯¯å…¨éƒ¨ä¿®å¤** - å®Œæˆäº†å¤§è§„æ¨¡çš„ TypeScript ç±»å‹ç³»ç»Ÿé‡æ„ï¼Œç¡®ä¿æ„å»ºè¿‡ç¨‹é›¶é”™è¯¯
- **ç”Ÿäº§å°±ç»ªçŠ¶æ€** - åº“æ–‡ä»¶æ„å»ºç¨³å®šï¼Œæ”¯æŒ ES æ¨¡å—å’Œ UMD ä¸¤ç§æ ¼å¼ï¼Œå®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶
- **TypeScript ç±»å‹å®‰å…¨** - å®Œå–„çš„ç±»å‹å®šä¹‰ï¼Œç¡®ä¿å¼€å‘æ—¶çš„ç±»å‹å®‰å…¨å’Œ IDE æ™ºèƒ½æç¤º

### ğŸš€ åŠŸèƒ½å®Œæ•´æ€§å’Œç¨³å®šæ€§
- **è·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°åŠŸèƒ½å®Œæ•´é›†æˆ** - å°† TreeDemo ä¸­çš„é«˜çº§è·¨æ ‘æ‹–æ‹½åŠŸèƒ½å®Œå…¨é›†æˆåˆ°æ’ä»¶æ ¸å¿ƒï¼Œæä¾›å¼€ç®±å³ç”¨çš„è·¨æ ‘æ‹–æ‹½ä½“éªŒ
- **CrossTreeDataProvider æ¥å£** - æ–°å¢è·¨æ ‘æ•°æ®æä¾›è€…æ¥å£ï¼Œæ”¯æŒçµæ´»çš„æ•°æ®æºç®¡ç†å’Œè‡ªå®šä¹‰æ•°æ®æ›´æ–°é€»è¾‘
- **å¢å¼ºçš„æ‹–æ‹½çŠ¶æ€ç®¡ç†** - æ–°å¢ useCrossTreeDragState å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œç¡®ä¿è·¨æ ‘æ‹–æ‹½çŠ¶æ€çš„ä¸€è‡´æ€§å’Œå¯é æ€§
- **å®Œå–„çš„é”™è¯¯å¤„ç†** - ä¿®å¤æ‰€æœ‰å…³é”®è¿è¡Œæ—¶é”™è¯¯ï¼Œæå‡ç»„ä»¶ç¨³å®šæ€§å’Œå¯é æ€§

### ğŸ—ï¸ æ¶æ„ä¼˜åŒ–
- **æ’ä»¶åŒ–æ¶æ„ä¼˜åŒ–** - æ‰€æœ‰è·¨æ ‘æ‹–æ‹½åŠŸèƒ½ç°å·²å®Œå…¨é›†æˆåˆ°æ’ä»¶æ ¸å¿ƒï¼Œç¬¦åˆæ’ä»¶è§„èŒƒï¼Œæ— éœ€é¢å¤–é…ç½®
- **æ€§èƒ½ä¼˜åŒ–** - ç”Ÿäº§æ„å»ºè‡ªåŠ¨ç§»é™¤è°ƒè¯•æ—¥å¿—ï¼Œä¼˜åŒ–åŒ…ä½“ç§¯å’Œè¿è¡Œæ€§èƒ½
- **å¼€å‘ä½“éªŒæå‡** - å®Œæ•´çš„å¼€å‘å·¥å…·æ”¯æŒï¼Œçƒ­é‡è½½ï¼Œç±»å‹æ£€æŸ¥ç­‰

## ğŸš€ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **å®Œæ•´çš„æ ‘å½¢ç»“æ„æ”¯æŒ** - æ”¯æŒæ— é™å±‚çº§çš„æ ‘å½¢æ•°æ®å±•ç¤ºï¼Œç»è¿‡å¤§è§„æ¨¡æµ‹è¯•éªŒè¯
- **å¤šç§é€‰æ‹©æ¨¡å¼** - æ”¯æŒå•é€‰ã€å¤šé€‰ã€å¤é€‰æ¡†é€‰æ‹©ï¼ŒçŠ¶æ€ç®¡ç†ç¨³å®šå¯é 
- **æ‹–æ‹½åŠŸèƒ½** - æ”¯æŒèŠ‚ç‚¹æ‹–æ‹½æ’åºå’Œè·¨æ ‘æ‹–æ‹½ï¼ŒåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€æ¢å¤
- **é”®ç›˜å¯¼èˆª** - å®Œæ•´çš„é”®ç›˜å¿«æ·é”®æ”¯æŒï¼Œç¬¦åˆæ— éšœç¢è®¿é—®æ ‡å‡†
- **æ‡’åŠ è½½** - æ”¯æŒå¤§æ•°æ®é‡çš„æ‡’åŠ è½½å±•ç¤ºï¼Œæ€§èƒ½ä¼˜åŒ–åˆ°ä½
- **è¿‡æ»¤æœç´¢** - å†…ç½®è¿‡æ»¤å™¨ï¼Œæ”¯æŒè‡ªå®šä¹‰è¿‡æ»¤é€»è¾‘ï¼Œæœç´¢æ€§èƒ½ä¼˜å¼‚

### é«˜çº§åŠŸèƒ½
- **è·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°** - å…¨æ–°çš„è‡ªåŠ¨æ›´æ–°æ¨¡å¼ï¼Œæ”¯æŒå¤šä¸ªæ ‘ç»„ä»¶ä¹‹é—´çš„æ™ºèƒ½æ•°æ®åŒæ­¥
- **CrossTreeDataProvider æ¥å£** - çµæ´»çš„æ•°æ®æä¾›è€…æ¨¡å¼ï¼Œæ”¯æŒè‡ªå®šä¹‰æ•°æ®æºå’Œæ›´æ–°é€»è¾‘
- **å…¨å±€çŠ¶æ€ç®¡ç†** - useCrossTreeDragState æä¾›ä¸€è‡´çš„è·¨ç»„ä»¶çŠ¶æ€ç®¡ç†
- **è‡ªå®šä¹‰æ¨¡æ¿** - æ”¯æŒèŠ‚ç‚¹å†…å®¹ã€å›¾æ ‡ã€å±•å¼€/æŠ˜å å›¾æ ‡çš„è‡ªå®šä¹‰
- **äº‹ä»¶ç³»ç»Ÿ** - ä¸°å¯Œçš„äº‹ä»¶å›è°ƒï¼ŒåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€è¿½è¸ª
- **ä¸»é¢˜å®šåˆ¶** - æ”¯æŒè‡ªå®šä¹‰æ ·å¼å’Œä¸»é¢˜ï¼ŒCSS å˜é‡æ”¯æŒ

### æŠ€æœ¯ç‰¹æ€§
- **Vue 3 Composition API** - åŸºäºæœ€æ–°çš„ Vue 3 æŠ€æœ¯æ ˆï¼Œå……åˆ†åˆ©ç”¨å“åº”å¼ç³»ç»Ÿ
- **TypeScript å®Œå…¨æ”¯æŒ** - 100% TypeScript ç¼–å†™ï¼Œå®Œæ•´çš„ç±»å‹å®‰å…¨æ”¯æŒï¼Œé›¶ç±»å‹é”™è¯¯
- **ç”Ÿäº§å°±ç»ª** - ç»è¿‡ä¸¥æ ¼æµ‹è¯•ï¼Œ44ä¸ªæ„å»ºé”™è¯¯å…¨éƒ¨ä¿®å¤ï¼Œç¨³å®šå¯é 
- **Tree Shaking** - æ”¯æŒæŒ‰éœ€å¼•å…¥ï¼Œä¼˜åŒ–åŒ…ä½“ç§¯ï¼Œç”Ÿäº§æ„å»ºè‡ªåŠ¨ä¼˜åŒ–
- **SSR å‹å¥½** - æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ŒåŒæ„åº”ç”¨å…¼å®¹
- **é›¶å¤–éƒ¨ä¾èµ–** - é™¤ Vue 3 å¤–æ— å…¶ä»–ä¾èµ–ï¼Œå‡å°‘åŒ…ä½“ç§¯å’Œæ½œåœ¨å†²çª

## ğŸ“‹ ç‰ˆæœ¬ä¿¡æ¯

**å½“å‰æœ€æ–°ç‰ˆæœ¬ï¼šv1.4.1**

æœ¬ç‰ˆæœ¬æ˜¯ä¸€ä¸ªè¡¥ä¸ç‰ˆæœ¬ï¼Œä¸»è¦ä¿®å¤å†…å®¹ï¼š
- ä¿®å¤äº† TreeDemo.vue ä¸­æ‹–æ‹½æ’åºåŠŸèƒ½çš„é…ç½®é—®é¢˜
- ä¿®å¤äº† TreeDemo.vue ä¸­è·¨æ ‘æ‹–æ‹½åŠŸèƒ½çš„é…ç½®é—®é¢˜
- ä¸º Tree ç»„ä»¶æ·»åŠ äº†ç¼ºå°‘çš„ `:dragdrop="true"` å±æ€§
- ä¸ºè·¨æ ‘æ‹–æ‹½æ·»åŠ äº† `:crossTreeAutoUpdate="false"` å±æ€§
- ç¡®ä¿æ¼”ç¤ºé¡µé¢ä¸­çš„æ‹–æ‹½åŠŸèƒ½æ­£å¸¸å·¥ä½œ

**v1.4.0 ç‰ˆæœ¬ä¸»è¦æ”¹è¿›ï¼š**
- å®Œæ•´é›†æˆè·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°åŠŸèƒ½åˆ°æ’ä»¶æ ¸å¿ƒ
- æ–°å¢ CrossTreeDataProvider æ¥å£ï¼Œæ”¯æŒçµæ´»çš„æ•°æ®æºç®¡ç†
- å¢å¼ºæ‹–æ‹½çŠ¶æ€ç®¡ç†ï¼Œæ–°å¢å…¨å±€çŠ¶æ€ç®¡ç†æœºåˆ¶
- ä¿®å¤å…³é”®é”™è¯¯ï¼Œæå‡ç»„ä»¶ç¨³å®šæ€§å’Œå¯é æ€§
- ä¼˜åŒ–æ’ä»¶åŒ–æ¶æ„ï¼Œæ‰€æœ‰åŠŸèƒ½å®Œå…¨é›†æˆåˆ°æ ¸å¿ƒ

## ğŸ—ï¸ æ„å»ºçŠ¶æ€

### æ„å»ºä¿¡æ¯
- **æ„å»ºçŠ¶æ€**: âœ… é€šè¿‡ (44ä¸ªé”™è¯¯å·²ä¿®å¤)
- **ç±»å‹æ£€æŸ¥**: âœ… å®Œå…¨é€šè¿‡
- **ç”Ÿäº§å°±ç»ª**: âœ… æ˜¯
- **åŒ…æ ¼å¼**: ES æ¨¡å— + UMD
- **ç±»å‹å®šä¹‰**: å®Œæ•´çš„ .d.ts æ–‡ä»¶

### æ€§èƒ½æŒ‡æ ‡
- **åŒ…ä½“ç§¯**: ä¼˜åŒ–åçš„ç”Ÿäº§æ„å»º
- **Tree Shaking**: âœ… æ”¯æŒ
- **è°ƒè¯•æ—¥å¿—**: ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨ç§»é™¤
- **ä¾èµ–**: é›¶å¤–éƒ¨ä¾èµ– (é™¤ Vue 3)

### è´¨é‡ä¿è¯
- **TypeScript**: 100% ç±»å‹å®‰å…¨
- **é”™è¯¯å¤„ç†**: å®Œæ•´çš„é”™è¯¯è¾¹ç•Œ
- **çŠ¶æ€ç®¡ç†**: ç¨³å®šçš„å“åº”å¼çŠ¶æ€
- **æµ‹è¯•è¦†ç›–**: æ ¸å¿ƒåŠŸèƒ½å…¨è¦†ç›–

## ğŸ“¦ å®‰è£…

```bash
# ä½¿ç”¨ npm
npm install vue3-super-tree

# ä½¿ç”¨ yarn
yarn add vue3-super-tree

# ä½¿ç”¨ pnpm
pnpm add vue3-super-tree
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨

```vue
<template>
  <div>
    <Tree 
      :value="nodes" 
      :selectionMode="'single'"
      v-model:selectionKeys="selectedKeys"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const nodes = ref([
  {
    key: '0',
    label: 'æ ¹èŠ‚ç‚¹',
    children: [
      {
        key: '0-0',
        label: 'å­èŠ‚ç‚¹ 1'
      },
      {
        key: '0-1',
        label: 'å­èŠ‚ç‚¹ 2'
      }
    ]
  }
])

const selectedKeys = ref({})
</script>
```

### å®Œæ•´åŠŸèƒ½ç¤ºä¾‹

```vue
<template>
  <div>
    <Tree 
      :value="nodes"
      :selectionMode="'multiple'"
      :filter="true"
      :dragdrop="true"
      :loading="loading"
      v-model:selectionKeys="selectedKeys"
      v-model:expandedKeys="expandedKeys"
      @node-select="onNodeSelect"
      @node-unselect="onNodeUnselect"
      @node-expand="onNodeExpand"
      @node-collapse="onNodeCollapse"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const nodes = ref([...]) // ä½ çš„æ ‘å½¢æ•°æ®
const selectedKeys = ref({})
const expandedKeys = ref({})
const loading = ref(false)

const onNodeSelect = (node) => {
  console.log('èŠ‚ç‚¹é€‰ä¸­:', node)
}

const onNodeUnselect = (node) => {
  console.log('èŠ‚ç‚¹å–æ¶ˆé€‰ä¸­:', node)
}

const onNodeExpand = (node) => {
  console.log('èŠ‚ç‚¹å±•å¼€:', node)
}

const onNodeCollapse = (node) => {
  console.log('èŠ‚ç‚¹æŠ˜å :', node)
}
</script>
```

### TypeScript æ”¯æŒ

```typescript
import { ref } from 'vue'
import { Tree } from 'vue3-super-tree'
import type { TreeNode, TreeSelectionKeys, TreeExpandedKeys } from 'vue3-super-tree/types'
import 'vue3-super-tree/style.css'

const nodes = ref<TreeNode[]>([
  {
    key: '0',
    label: 'æ ¹èŠ‚ç‚¹',
    children: [...]
  }
])

const selectedKeys = ref<TreeSelectionKeys>({})
const expandedKeys = ref<TreeExpandedKeys>({})
```

## ğŸ“– API æ–‡æ¡£

### Tree ç»„ä»¶å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `value` | `TreeNode[]` | `[]` | æ ‘å½¢æ•°æ®ï¼Œæ”¯æŒæ— é™å±‚çº§åµŒå¥— |
| `modelValue` | `TreeSelectionKeys` | `null` | é€‰ä¸­çš„èŠ‚ç‚¹ï¼ˆv-modelï¼‰ï¼Œæ”¯æŒåŒå‘ç»‘å®š |
| `selectionMode` | `'single' \| 'multiple' \| 'checkbox'` | `null` | é€‰æ‹©æ¨¡å¼ï¼šå•é€‰ã€å¤šé€‰æˆ–å¤é€‰æ¡†æ¨¡å¼ |
| `selectionKeys` | `TreeSelectionKeys` | `{}` | é€‰ä¸­çŠ¶æ€å¯¹è±¡ï¼Œé”®ä¸ºèŠ‚ç‚¹ keyï¼Œå€¼ä¸ºé€‰ä¸­çŠ¶æ€ |
| `expandedKeys` | `TreeExpandedKeys` | `{}` | å±•å¼€çŠ¶æ€å¯¹è±¡ï¼Œé”®ä¸ºèŠ‚ç‚¹ keyï¼Œå€¼ä¸ºå±•å¼€çŠ¶æ€ |
| `dragdrop` | `boolean` | `false` | æ˜¯å¦å¯ç”¨æ‹–æ‹½åŠŸèƒ½ |
| `dragdropScope` | `string` | `undefined` | æ‹–æ‹½ä½œç”¨åŸŸï¼Œç›¸åŒä½œç”¨åŸŸçš„æ ‘å¯ä»¥äº’ç›¸æ‹–æ‹½ |
| `autoUpdate` | `boolean` | `false` | åŒæ ‘æ‹–æ‹½æ—¶æ˜¯å¦è‡ªåŠ¨æ›´æ–°æ•°æ®æº |
| `crossTreeAutoUpdate` | `boolean` | `false` | **ğŸ†• v1.4.0** è·¨æ ‘æ‹–æ‹½æ—¶æ˜¯å¦è‡ªåŠ¨æ›´æ–°æ•°æ®æº |
| `crossTreeDataProvider` | `CrossTreeDataProvider` | `undefined` | **ğŸ†• v1.4.0** è·¨æ ‘æ•°æ®æä¾›è€…ï¼Œç”¨äºè·å–å’Œæ›´æ–°ä¸åŒæ ‘çš„æ•°æ® |
| `filter` | `boolean` | `false` | æ˜¯å¦å¯ç”¨è¿‡æ»¤åŠŸèƒ½ |
| `filterMode` | `'lenient' \| 'strict'` | `'lenient'` | è¿‡æ»¤æ¨¡å¼ï¼šå®½æ¾æ¨¡å¼æ˜¾ç¤ºåŒ¹é…èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä¸¥æ ¼æ¨¡å¼åªæ˜¾ç¤ºåŒ¹é…èŠ‚ç‚¹ |
| `filterBy` | `string` | `'label'` | è¿‡æ»¤å­—æ®µï¼ŒæŒ‡å®šæŒ‰å“ªä¸ªå­—æ®µè¿›è¡Œè¿‡æ»¤ |
| `lazy` | `boolean` | `false` | æ˜¯å¦å¯ç”¨æ‡’åŠ è½½ï¼Œé€‚ç”¨äºå¤§æ•°æ®é‡åœºæ™¯ |
| `loading` | `boolean` | `false` | åŠ è½½çŠ¶æ€ï¼Œæ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ |
| `indent` | `number` | `1` | ç¼©è¿›çº§åˆ«ï¼Œæ§åˆ¶å­èŠ‚ç‚¹çš„ç¼©è¿›è·ç¦» |
| `metaKeySelection` | `boolean` | `true` | æ˜¯å¦æ”¯æŒ Ctrl/Cmd é”®å¤šé€‰ |

### Tree ç»„ä»¶äº‹ä»¶

| äº‹ä»¶ | å‚æ•° | æè¿° |
|------|------|------|
| `node-select` | `TreeNodeSelectEvent` | èŠ‚ç‚¹é€‰ä¸­æ—¶è§¦å‘ |
| `node-unselect` | `TreeNodeUnselectEvent` | èŠ‚ç‚¹å–æ¶ˆé€‰ä¸­æ—¶è§¦å‘ |
| `node-expand` | `TreeNodeExpandEvent` | èŠ‚ç‚¹å±•å¼€æ—¶è§¦å‘ |
| `node-collapse` | `TreeNodeCollapseEvent` | èŠ‚ç‚¹æŠ˜å æ—¶è§¦å‘ |
| `node-focus` | `TreeNodeFocusEvent` | èŠ‚ç‚¹è·å¾—ç„¦ç‚¹æ—¶è§¦å‘ |
| `node-blur` | `TreeNodeBlurEvent` | èŠ‚ç‚¹å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ |
| `node-click` | `TreeNodeClickEvent` | èŠ‚ç‚¹ç‚¹å‡»æ—¶è§¦å‘ |
| `node-drop` | `TreeNodeDropEvent` | èŠ‚ç‚¹æ‹–æ‹½æ”¾ç½®æ—¶è§¦å‘ |
| `node-drag-start` | `{ originalEvent, node }` | å¼€å§‹æ‹–æ‹½æ—¶è§¦å‘ |
| `node-drag-end` | `{ originalEvent, node }` | æ‹–æ‹½ç»“æŸæ—¶è§¦å‘ |
| `cross-tree-drag-start` | `CrossTreeDragStartEvent` | è·¨æ ‘æ‹–æ‹½å¼€å§‹æ—¶è§¦å‘ |
| `cross-tree-drag-enter` | `CrossTreeDragEnterEvent` | æ‹–æ‹½èŠ‚ç‚¹è¿›å…¥ç›®æ ‡æ ‘æ—¶è§¦å‘ |
| `cross-tree-drag-over` | `CrossTreeDragOverEvent` | æ‹–æ‹½èŠ‚ç‚¹åœ¨ç›®æ ‡æ ‘ä¸Šæ–¹ç§»åŠ¨æ—¶è§¦å‘ |
| `cross-tree-drag-leave` | `CrossTreeDragLeaveEvent` | æ‹–æ‹½èŠ‚ç‚¹ç¦»å¼€ç›®æ ‡æ ‘æ—¶è§¦å‘ |
| `cross-tree-drop` | `CrossTreeDropEvent` | è·¨æ ‘æ‹–æ‹½æ”¾ç½®æ—¶è§¦å‘ |
| `cross-tree-drag-end` | `CrossTreeDragEndEvent` | è·¨æ ‘æ‹–æ‹½ç»“æŸæ—¶è§¦å‘ï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰ |
| `cross-tree-drag-cancel` | `CrossTreeDragCancelEvent` | è·¨æ ‘æ‹–æ‹½å–æ¶ˆæ—¶è§¦å‘ï¼ˆå¦‚æŒ‰ ESC é”®ï¼‰ |

### TreeNode æ¥å£

```typescript
interface TreeNode {
  key: string | number          // èŠ‚ç‚¹å”¯ä¸€æ ‡è¯†
  label: string                 // èŠ‚ç‚¹æ˜¾ç¤ºæ–‡æœ¬
  data?: any                   // èŠ‚ç‚¹å…³è”æ•°æ®
  icon?: string | Component    // èŠ‚ç‚¹å›¾æ ‡
  children?: TreeNode[]        // å­èŠ‚ç‚¹
  leaf?: boolean              // æ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹
  expanded?: boolean          // æ˜¯å¦å±•å¼€
  selectable?: boolean        // æ˜¯å¦å¯é€‰æ‹©
  draggable?: boolean         // æ˜¯å¦å¯æ‹–æ‹½
  droppable?: boolean         // æ˜¯å¦å¯ä½œä¸ºæ‹–æ‹½ç›®æ ‡
  styleClass?: string         // è‡ªå®šä¹‰æ ·å¼ç±»
  style?: Record<string, any> // è‡ªå®šä¹‰æ ·å¼
}
```

### CrossTreeDataProvider æ¥å£

**ğŸ†• v1.4.0 æ–°å¢åŠŸèƒ½**

`CrossTreeDataProvider` æ˜¯è·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°åŠŸèƒ½çš„æ ¸å¿ƒæ¥å£ï¼Œå®ƒæä¾›äº†ç»Ÿä¸€çš„æ•°æ®è®¿é—®å’Œæ›´æ–°æœºåˆ¶ã€‚

```typescript
interface CrossTreeDataProvider {
  /**
   * è·å–æŒ‡å®šæ ‘çš„æ•°æ®
   * @param treeId æ ‘çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆé€šå¸¸æ˜¯ç»„ä»¶çš„ id å±æ€§ï¼‰
   * @returns æ ‘çš„æ•°æ®æ•°ç»„ï¼Œå¦‚æœæ ‘ä¸å­˜åœ¨åˆ™è¿”å› null æˆ– undefined
   */
  getTreeData: (treeId: string) => TreeNode[] | null | undefined
  
  /**
   * æ›´æ–°æŒ‡å®šæ ‘çš„æ•°æ®
   * @param treeId æ ‘çš„å”¯ä¸€æ ‡è¯†ç¬¦
   * @param newData æ–°çš„æ ‘æ•°æ®
   */
  updateTreeData: (treeId: string, newData: TreeNode[]) => void
}
```

#### ä½¿ç”¨è¯´æ˜

1. **å¿…é¡»ä¸ºæ¯ä¸ªæ ‘ç»„ä»¶è®¾ç½®å”¯ä¸€çš„ `id` å±æ€§**
2. **å®ç° `getTreeData` æ–¹æ³•**ï¼šæ ¹æ® `treeId` è¿”å›å¯¹åº”æ ‘çš„æ•°æ®
3. **å®ç° `updateTreeData` æ–¹æ³•**ï¼šæ ¹æ® `treeId` æ›´æ–°å¯¹åº”æ ‘çš„æ•°æ®
4. **å°†åŒä¸€ä¸ª `CrossTreeDataProvider` å®ä¾‹ä¼ é€’ç»™æ‰€æœ‰å‚ä¸è·¨æ ‘æ‹–æ‹½çš„æ ‘ç»„ä»¶**

#### é”™è¯¯å¤„ç†

- å¦‚æœ `getTreeData` è¿”å› `null` æˆ– `undefined`ï¼Œè·¨æ ‘æ‹–æ‹½å°†è¢«é˜»æ­¢
- ç¡®ä¿ `updateTreeData` æ–¹æ³•èƒ½æ­£ç¡®å¤„ç†æ•°æ®æ›´æ–°ï¼Œé¿å…å“åº”å¼ä¸¢å¤±
- å»ºè®®åœ¨æ–¹æ³•ä¸­æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## ä½¿ç”¨ç¤ºä¾‹

### 1. åŸºç¡€æ ‘å½¢å±•ç¤º

```vue
<template>
  <Tree :value="basicData" />
</template>

<script setup>
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const basicData = [
  {
    key: '1',
    label: 'æ–‡æ¡£',
    children: [
      { key: '1-1', label: 'å®‰è£…æŒ‡å—.md' },
      { key: '1-2', label: 'å¿«é€Ÿå¼€å§‹.md' }
    ]
  }
]
</script>
```

### 2. å¤šé€‰æ¨¡å¼

```vue
<template>
  <Tree
    :value="data"
    v-model:selectionKeys="selectedKeys"
    selectionMode="multiple"
    :metaKeySelection="false"
  />
</template>

<script setup>
import { ref } from 'vue'
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const selectedKeys = ref({})
</script>
```

### 3. å¤é€‰æ¡†é€‰æ‹©

```vue
<template>
  <Tree
    :value="data"
    v-model:selectionKeys="selectedKeys"
    selectionMode="checkbox"
  />
</template>

<script setup>
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'
</script>
```

### 4. æ‹–æ‹½åŠŸèƒ½

#### è‡ªåŠ¨æ›´æ–°æ¨¡å¼ï¼ˆæ¨èï¼‰

```vue
<template>
  <Tree
    :value="data"
    :autoUpdate="true"
    dragdropScope="demo"
    @node-drop="onNodeDrop"
  />
</template>

<script setup>
import { ref } from 'vue'
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const data = ref([...]) // ä½ çš„æ ‘å½¢æ•°æ®

const onNodeDrop = (event) => {
  // è‡ªåŠ¨æ›´æ–°æ¨¡å¼ä¸‹ï¼Œæ•°æ®ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œåªéœ€è¦æ¥å—æ‹–æ‹½
  event.accept()
  console.log('æ‹–æ‹½å®Œæˆï¼Œæ•°æ®å·²è‡ªåŠ¨æ›´æ–°')
}
</script>
```

#### æ‰‹åŠ¨å¤„ç†æ¨¡å¼

```vue
<template>
  <Tree
    :value="data"
    :autoUpdate="false"
    dragdropScope="demo"
    @node-drop="onNodeDrop"
  />
</template>

<script setup>
import { ref } from 'vue'
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const data = ref([...]) // ä½ çš„æ ‘å½¢æ•°æ®

const onNodeDrop = (event) => {
  // æ‰‹åŠ¨å¤„ç†æ‹–æ‹½é€»è¾‘
  const { dragNode, dropNode, dropIndex } = event
  
  // è‡ªå®šä¹‰æ‹–æ‹½å¤„ç†é€»è¾‘
  if (dropNode) {
    // æ‹–æ‹½åˆ°èŠ‚ç‚¹ä¸Š
    if (!dropNode.children) dropNode.children = []
    dropNode.children.push(dragNode)
  } else {
    // æ‹–æ‹½åˆ°æ ¹çº§åˆ«
    data.value.splice(dropIndex, 0, dragNode)
  }
  
  event.accept()
}
</script>
```

### 5. è·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°

#### æ¨èï¼šè‡ªåŠ¨æ›´æ–°æ¨¡å¼

```vue
<template>
  <div class="flex gap-4">
    <!-- æºæ ‘ -->
    <div class="w-1/2">
      <h3>æºæ ‘</h3>
      <Tree
        id="source-tree"
        :value="sourceData"
        :dragdrop="true"
        dragdropScope="cross-tree"
        :crossTreeAutoUpdate="true"
        :crossTreeDataProvider="crossTreeDataProvider"
        @cross-tree-drop="onCrossTreeDrop"
      />
    </div>
    
    <!-- ç›®æ ‡æ ‘ -->
    <div class="w-1/2">
      <h3>ç›®æ ‡æ ‘</h3>
      <Tree
        id="target-tree"
        :value="targetData"
        :dragdrop="true"
        dragdropScope="cross-tree"
        :crossTreeAutoUpdate="true"
        :crossTreeDataProvider="crossTreeDataProvider"
        @cross-tree-drop="onCrossTreeDrop"
      />
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const sourceData = ref([
  {
    key: 'source-1',
    label: 'æºèŠ‚ç‚¹ 1',
    children: [
      { key: 'source-1-1', label: 'æºå­èŠ‚ç‚¹ 1-1' },
      { key: 'source-1-2', label: 'æºå­èŠ‚ç‚¹ 1-2' }
    ]
  }
])

const targetData = ref([
  {
    key: 'target-1',
    label: 'ç›®æ ‡èŠ‚ç‚¹ 1',
    children: []
  }
])

// è·¨æ ‘æ•°æ®æä¾›è€…
const crossTreeDataProvider = {
  getTreeData: (treeId) => {
    if (treeId === 'source-tree') return sourceData.value
    if (treeId === 'target-tree') return targetData.value
    return null
  },
  
  updateTreeData: (treeId, newData) => {
    if (treeId === 'source-tree') {
      sourceData.value = newData
    } else if (treeId === 'target-tree') {
      targetData.value = newData
    }
  }
}

// å¯é€‰ï¼šç›‘å¬è·¨æ ‘æ‹–æ‹½äº‹ä»¶
const onCrossTreeDrop = (event) => {
  console.log('è·¨æ ‘æ‹–æ‹½å®Œæˆ:', {
    sourceTreeId: event.sourceTreeId,
    targetTreeId: event.targetTreeId,
    dragNode: event.dragNode,
    dropNode: event.dropNode,
    dropIndex: event.dropIndex
  })
}
</script>
```

### 6. è·¨æ ‘æ‹–æ‹½æ‰‹åŠ¨æ¨¡å¼

#### åŸºç¡€è·¨æ ‘æ‹–æ‹½

```vue
<template>
  <div class="flex gap-4">
    <Tree
      ref="sourceTree"
      :value="sourceData"
      dragdropScope="cross-tree"
      @node-drop="onCrossTreeDrop"
    />
    <Tree
      ref="targetTree"
      :value="targetData"
      dragdropScope="cross-tree"
      @node-drop="onCrossTreeDrop"
    />
  </div>
</template>

<script setup>
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const onCrossTreeDrop = (event) => {
  // å¤„ç†è·¨æ ‘æ‹–æ‹½
  if (event.isCrossTree) {
    // è·¨æ ‘æ‹–æ‹½é€»è¾‘
    event.accept()
  }
}
</script>
```

#### å®Œæ•´è·¨æ ‘æ‹–æ‹½äº‹ä»¶ç›‘å¬

```vue
<template>
  <div class="flex gap-4">
    <Tree
      id="tree1"
      :value="sourceData"
      dragdropScope="cross-tree"
      @node-drop="onCrossTreeDrop"
      @cross-tree-drag-start="onCrossTreeDragStart"
      @cross-tree-drag-enter="onCrossTreeDragEnter"
      @cross-tree-drag-over="onCrossTreeDragOver"
      @cross-tree-drag-leave="onCrossTreeDragLeave"
      @cross-tree-drop="onCrossTreeDropEvent"
      @cross-tree-drag-end="onCrossTreeDragEnd"
      @cross-tree-drag-cancel="onCrossTreeDragCancel"
    />
    <Tree
      id="tree2"
      :value="targetData"
      dragdropScope="cross-tree"
      @node-drop="onCrossTreeDrop"
      @cross-tree-drag-start="onCrossTreeDragStart"
      @cross-tree-drag-enter="onCrossTreeDragEnter"
      @cross-tree-drag-over="onCrossTreeDragOver"
      @cross-tree-drag-leave="onCrossTreeDragLeave"
      @cross-tree-drop="onCrossTreeDropEvent"
      @cross-tree-drag-end="onCrossTreeDragEnd"
      @cross-tree-drag-cancel="onCrossTreeDragCancel"
    />
  </div>
</template>

<script setup>
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

// è·¨æ ‘æ‹–æ‹½å¼€å§‹
const onCrossTreeDragStart = (event) => {
  console.log('è·¨æ ‘æ‹–æ‹½å¼€å§‹:', {
    sourceTreeId: event.sourceTreeId,
    dragNode: event.dragNode,
    isCrossTree: event.isCrossTree,
    timestamp: event.timestamp
  })
}

// æ‹–æ‹½èŠ‚ç‚¹è¿›å…¥ç›®æ ‡æ ‘
const onCrossTreeDragEnter = (event) => {
  console.log('è¿›å…¥ç›®æ ‡æ ‘:', {
    sourceTreeId: event.sourceTreeId,
    targetTreeId: event.targetTreeId,
    dragNode: event.dragNode
  })
}

// æ‹–æ‹½èŠ‚ç‚¹åœ¨ç›®æ ‡æ ‘ä¸Šæ–¹ç§»åŠ¨ï¼ˆé¢‘ç¹è§¦å‘ï¼‰
const onCrossTreeDragOver = (event) => {
  // ç”±äºé¢‘ç¹è§¦å‘ï¼Œé€šå¸¸åªåšå¿…è¦çš„å¤„ç†
  console.log('åœ¨ç›®æ ‡æ ‘ä¸Šæ–¹ç§»åŠ¨')
}

// æ‹–æ‹½èŠ‚ç‚¹ç¦»å¼€ç›®æ ‡æ ‘
const onCrossTreeDragLeave = (event) => {
  console.log('ç¦»å¼€ç›®æ ‡æ ‘:', {
    targetTreeId: event.targetTreeId,
    dragNode: event.dragNode
  })
}

// è·¨æ ‘æ‹–æ‹½æ”¾ç½®
const onCrossTreeDropEvent = (event) => {
  console.log('è·¨æ ‘æ‹–æ‹½æ”¾ç½®:', {
    sourceTreeId: event.sourceTreeId,
    targetTreeId: event.targetTreeId,
    dragNode: event.dragNode,
    dropNode: event.dropNode,
    dropPosition: event.dropPosition
  })
}

// è·¨æ ‘æ‹–æ‹½ç»“æŸ
const onCrossTreeDragEnd = (event) => {
  console.log('è·¨æ ‘æ‹–æ‹½ç»“æŸ:', {
    success: event.success,
    sourceTreeId: event.sourceTreeId,
    targetTreeId: event.targetTreeId
  })
}

// è·¨æ ‘æ‹–æ‹½å–æ¶ˆï¼ˆå¦‚æŒ‰ ESC é”®ï¼‰
const onCrossTreeDragCancel = (event) => {
  console.log('è·¨æ ‘æ‹–æ‹½å–æ¶ˆ:', {
    sourceTreeId: event.sourceTreeId,
    dragNode: event.dragNode
  })
}

// ä¼ ç»Ÿçš„ node-drop äº‹ä»¶å¤„ç†
const onCrossTreeDrop = (event) => {
  if (event.isCrossTree) {
    event.accept()
  }
}
</script>
```

#### è·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°

`crossTreeAutoUpdate` å‚æ•°æ§åˆ¶è·¨æ ‘æ‹–æ‹½æ—¶æ˜¯å¦è‡ªåŠ¨æ›´æ–°æ•°æ®æºã€‚v1.3.0 ç‰ˆæœ¬å®Œå–„äº†è·¨æ ‘æ‹–æ‹½çš„æ•°æ®åŒæ­¥æœºåˆ¶ï¼Œç¡®ä¿åœ¨ä¸¤ç§æ¨¡å¼ä¸‹éƒ½èƒ½æ­£ç¡®æ›´æ–°æ•°æ®ï¼š

- **è‡ªåŠ¨æ›´æ–°æ¨¡å¼** (`crossTreeAutoUpdate: true`)ï¼šæ‹–æ‹½æ“ä½œä¼šè‡ªåŠ¨è°ƒç”¨ `accept()` æ–¹æ³•å¹¶åŒæ­¥æ›´æ–°æºæ ‘å’Œç›®æ ‡æ ‘çš„æ•°æ®
- **æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼** (`crossTreeAutoUpdate: false`)ï¼šéœ€è¦æ‰‹åŠ¨è°ƒç”¨ `accept()` æˆ– `reject()` æ–¹æ³•ï¼Œç¡®è®¤åæ‰ä¼šæ›´æ–°æ•°æ®

```vue
<template>
  <div class="flex gap-4">
    <!-- è‡ªåŠ¨æ›´æ–°æ¨¡å¼ -->
    <Tree
      id="auto-tree1"
      :value="autoData1"
      :crossTreeAutoUpdate="true"
      :dragdrop="true"
      dragdropScope="auto-cross-tree"
      @cross-tree-drop="onAutoUpdateDrop"
    />
    <Tree
      id="auto-tree2"
      :value="autoData2"
      :crossTreeAutoUpdate="true"
      :dragdrop="true"
      dragdropScope="auto-cross-tree"
      @cross-tree-drop="onAutoUpdateDrop"
    />
    
    <!-- æ‰‹åŠ¨æ§åˆ¶æ¨¡å¼ -->
    <Tree
      id="manual-tree1"
      :value="manualData1"
      :crossTreeAutoUpdate="false"
      :dragdrop="true"
      dragdropScope="manual-cross-tree"
      @cross-tree-drop="onManualControlDrop"
    />
    <Tree
      id="manual-tree2"
      :value="manualData2"
      :crossTreeAutoUpdate="false"
      :dragdrop="true"
      dragdropScope="manual-cross-tree"
      @cross-tree-drop="onManualControlDrop"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const autoData1 = ref([...]) // è‡ªåŠ¨æ›´æ–°æ¨¡å¼çš„æºæ ‘æ•°æ®
const autoData2 = ref([...]) // è‡ªåŠ¨æ›´æ–°æ¨¡å¼çš„ç›®æ ‡æ ‘æ•°æ®
const manualData1 = ref([...]) // æ‰‹åŠ¨æ§åˆ¶æ¨¡å¼çš„æºæ ‘æ•°æ®
const manualData2 = ref([...]) // æ‰‹åŠ¨æ§åˆ¶æ¨¡å¼çš„ç›®æ ‡æ ‘æ•°æ®

// è‡ªåŠ¨æ›´æ–°æ¨¡å¼ï¼šæ‹–æ‹½ä¼šè‡ªåŠ¨å®Œæˆæ•°æ®åŒæ­¥
const onAutoUpdateDrop = (event) => {
  console.log('è‡ªåŠ¨æ›´æ–°æ‹–æ‹½:', event)
  // v1.3.0 ç‰ˆæœ¬å·²å®Œå–„æ•°æ®åŒæ­¥æœºåˆ¶ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†æ•°æ®æ›´æ–°
  // ç»„ä»¶ä¼šè‡ªåŠ¨è°ƒç”¨ accept() å¹¶æ›´æ–°æºæ ‘å’Œç›®æ ‡æ ‘çš„æ•°æ®
}

// æ‰‹åŠ¨æ§åˆ¶æ¨¡å¼ï¼šéœ€è¦æ‰‹åŠ¨å†³å®šæ˜¯å¦æ¥å—æ‹–æ‹½
const onManualControlDrop = (event) => {
  console.log('æ‰‹åŠ¨æ§åˆ¶æ‹–æ‹½:', event)
  
  // æ ¹æ®ä¸šåŠ¡é€»è¾‘å†³å®šæ˜¯å¦æ¥å—æ‹–æ‹½
  const shouldAccept = validateDragOperation(event)
  
  if (shouldAccept) {
    event.accept() // æ¥å—æ‹–æ‹½ï¼Œè‡ªåŠ¨æ›´æ–°æºæ ‘å’Œç›®æ ‡æ ‘æ•°æ®
  } else {
    event.reject() // æ‹’ç»æ‹–æ‹½ï¼Œä¸æ›´æ–°æ•°æ®
  }
}

const validateDragOperation = (event) => {
  // è‡ªå®šä¹‰éªŒè¯é€»è¾‘
  return event.dragNode.label !== 'ç¦æ­¢æ‹–æ‹½çš„èŠ‚ç‚¹'
}
</script>
```

**ä½¿ç”¨åœºæ™¯ï¼š**

- **è‡ªåŠ¨æ›´æ–°æ¨¡å¼** (`crossTreeAutoUpdate: true`)ï¼šé€‚ç”¨äºç®€å•çš„æ‹–æ‹½æ“ä½œï¼Œæ— éœ€å¤æ‚éªŒè¯
- **æ‰‹åŠ¨æ§åˆ¶æ¨¡å¼** (`crossTreeAutoUpdate: false`)ï¼šé€‚ç”¨äºéœ€è¦éªŒè¯ã€ç¡®è®¤æˆ–å¼‚æ­¥å¤„ç†çš„æ‹–æ‹½æ“ä½œ

**æ³¨æ„äº‹é¡¹ï¼š**

1. `crossTreeAutoUpdate` åªå½±å“è·¨æ ‘æ‹–æ‹½ï¼Œä¸å½±å“åŒæ ‘å†…çš„æ‹–æ‹½æ“ä½œ
2. æ‰‹åŠ¨æ§åˆ¶æ¨¡å¼ä¸‹ï¼Œå¿…é¡»è°ƒç”¨ `accept()` æˆ– `reject()` æ–¹æ³•ï¼Œå¦åˆ™æ‹–æ‹½çŠ¶æ€ä¸ä¼šæ¸…ç†
3. å¯ä»¥ä¸ `autoUpdate` å‚æ•°é…åˆä½¿ç”¨ï¼Œåˆ†åˆ«æ§åˆ¶åŒæ ‘å’Œè·¨æ ‘çš„æ‹–æ‹½è¡Œä¸º

### 7. èŠ‚ç‚¹è¿‡æ»¤

```vue
<template>
  <Tree
    :value="data"
    :filter="true"
    filterBy="label"
    filterPlaceholder="æœç´¢èŠ‚ç‚¹..."
  />
</template>

<script setup>
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'
</script>
```

### 8. æ‡’åŠ è½½

```vue
<template>
  <Tree
    :value="data"
    :lazy="true"
    @node-load="onNodeLoad"
  />
</template>

<script setup>
import { Tree } from 'vue3-super-tree'
import 'vue3-super-tree/style.css'

const onNodeLoad = async (event) => {
  // å¼‚æ­¥åŠ è½½å­èŠ‚ç‚¹
  const children = await fetchChildren(event.node.key)
  event.node.children = children
}
</script>
```

## é”®ç›˜æ“ä½œ

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| `â†‘/â†“` | ä¸Šä¸‹å¯¼èˆª |
| `â†/â†’` | å±•å¼€/æŠ˜å èŠ‚ç‚¹ |
| `Enter` | é€‰æ‹©èŠ‚ç‚¹ |
| `Space` | åˆ‡æ¢å¤é€‰æ¡†çŠ¶æ€ |
| `Home` | è·³è½¬åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ |
| `End` | è·³è½¬åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹ |
| `Ctrl/Cmd + A` | å…¨é€‰ï¼ˆå¤šé€‰æ¨¡å¼ï¼‰ |

## æ ·å¼å®šåˆ¶

### å¯¼å…¥æ ·å¼

```javascript
// å¯¼å…¥é»˜è®¤æ ·å¼
import 'vue3-super-tree/style.css'
```

### åŸç”Ÿç„¦ç‚¹æ ·å¼

ç»„ä»¶ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ `:focus` ä¼ªç±»æ¥ç®¡ç†ç„¦ç‚¹æ ·å¼ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œæ— éšœç¢è®¿é—®ä½“éªŒï¼š

```css
/* ç»„ä»¶å†…ç½®çš„ç„¦ç‚¹æ ·å¼ */
.tree-node:focus {
  outline: 2px solid #3b82f6;
  outline-offset: -2px;
  background-color: #eff6ff;
}

/* è‡ªå®šä¹‰ç„¦ç‚¹æ ·å¼ */
.tree-node:focus {
  outline: 2px solid #10b981;
  background-color: #ecfdf5;
  border-radius: 0.375rem;
}
```

### ä¸»é¢˜å˜é‡

ç»„ä»¶æ”¯æŒé€šè¿‡ CSS å˜é‡è¿›è¡Œä¸»é¢˜å®šåˆ¶ï¼š

```css
:root {
  --tree-node-padding: 0.5rem;
  --tree-node-border-radius: 0.375rem;
  --tree-selected-bg: #3b82f6;
  --tree-selected-color: white;
  --tree-focus-bg: #eff6ff;
  --tree-focus-color: #1e40af;
  --tree-focus-outline: #3b82f6;
}
```

### è‡ªå®šä¹‰æ ·å¼ç±»

```vue
<Tree
  :value="data"
  class="custom-tree"
  :selectedBackgroundColor="#10b981"
  :selectedTextColor="white"
  :focusBackgroundColor="#ecfdf5"
  :focusTextColor="#059669"
/>
```

## ç›¸å…³é“¾æ¥

- **npm åŒ…**: https://www.npmjs.com/package/vue3-super-tree
- **GitHub ä»“åº“**: https://github.com/zuoanCo/vue3-super-tree
- **åœ¨çº¿æ¼”ç¤º**: https://zuoanCo.github.io/vue3-super-tree
- **API æ–‡æ¡£**: https://github.com/zuoanCo/vue3-super-tree#api-æ–‡æ¡£
- **é—®é¢˜åé¦ˆ**: https://github.com/zuoanCo/vue3-super-tree/issues

## æŠ€æœ¯æ ˆ

- **Vue 3.4+** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **Vite** - å¿«é€Ÿçš„å‰ç«¯æ„å»ºå·¥å…·
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Lucide Icons** - ç¾è§‚çš„å›¾æ ‡åº“

## æ€§èƒ½ä¼˜åŒ–

### ç”Ÿäº§æ„å»ºä¼˜åŒ–

ç»„ä»¶åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è‡ªåŠ¨è¿›è¡Œä»¥ä¸‹ä¼˜åŒ–ï¼š

- **è°ƒè¯•æ—¥å¿—ç§»é™¤** - è‡ªåŠ¨ç§»é™¤æ‰€æœ‰ `console.log` è°ƒè¯•ä¿¡æ¯
- **ä»£ç å‹ç¼©** - ä½¿ç”¨ Terser è¿›è¡Œä»£ç å‹ç¼©å’Œæ··æ·†
- **Tree Shaking** - ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œå‡å°åŒ…ä½“ç§¯
- **åŸç”Ÿç„¦ç‚¹ç®¡ç†** - ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿ `:focus` ä¼ªç±»ï¼Œå‡å°‘ JavaScript å¼€é”€

### è¿è¡Œæ—¶æ€§èƒ½

- **è™šæ‹Ÿæ»šåŠ¨** - å¤§æ•°æ®é‡æ—¶è‡ªåŠ¨å¯ç”¨è™šæ‹Ÿæ»šåŠ¨
- **æ™ºèƒ½æ›´æ–°** - åªæ›´æ–°å˜åŒ–çš„èŠ‚ç‚¹ï¼Œé¿å…å…¨é‡é‡æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–** - åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å’Œå¼•ç”¨

## é¡¹ç›®ç»“æ„

```
vue3-super-tree/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ Tree.vue        # ä¸»æ ‘ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TreeNode.vue    # æ ‘èŠ‚ç‚¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ index.ts        # ç»„ä»¶å¯¼å‡º
â”‚   â”œâ”€â”€ lib/                # æ ¸å¿ƒåº“
â”‚   â”‚   â”œâ”€â”€ types.ts        # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils.ts        # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ themes.ts       # ä¸»é¢˜é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts        # åº“å¯¼å‡º
â”‚   â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useDragDrop.ts  # æ‹–æ‹½åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ useSelection.ts # é€‰æ‹©åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ useFilter.ts    # è¿‡æ»¤åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ index.ts        # ç»„åˆå‡½æ•°å¯¼å‡º
â”‚   â””â”€â”€ style.css           # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ dist/                   # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json           # åŒ…é…ç½®
â”œâ”€â”€ vite.lib.config.ts     # Vite åº“æ„å»ºé…ç½®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ„å»ºé”™è¯¯

**é—®é¢˜**: TypeScript æ„å»ºå¤±è´¥ï¼Œå‡ºç°ç±»å‹é”™è¯¯
```
error TS2742: The inferred type of 'xxx' cannot be named without a reference to '@vue/shared'
```

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿ä½¿ç”¨çš„æ˜¯ v1.4.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬å·²ä¿®å¤æ‰€æœ‰æ„å»ºé”™è¯¯
- æ£€æŸ¥ TypeScript ç‰ˆæœ¬æ˜¯å¦å…¼å®¹ï¼ˆæ¨è 4.9+ï¼‰
- æ¸…ç†ç¼“å­˜ï¼š`rm -rf node_modules/.cache && pnpm install`

#### 2. è·¨æ ‘æ‹–æ‹½ä¸å·¥ä½œ

**é—®é¢˜**: è·¨æ ‘æ‹–æ‹½åŠŸèƒ½æ— æ³•æ­£å¸¸å·¥ä½œ

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿æ‰€æœ‰å‚ä¸è·¨æ ‘æ‹–æ‹½çš„æ ‘ç»„ä»¶éƒ½è®¾ç½®äº†ç›¸åŒçš„ `dragdropScope`
- æ£€æŸ¥æ˜¯å¦ä¸ºæ¯ä¸ªæ ‘ç»„ä»¶è®¾ç½®äº†å”¯ä¸€çš„ `id` å±æ€§
- ç¡®ä¿ `CrossTreeDataProvider` æ­£ç¡®å®ç°äº† `getTreeData` å’Œ `updateTreeData` æ–¹æ³•
- æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

#### 3. è‡ªåŠ¨æ›´æ–°ä¸ç”Ÿæ•ˆ

**é—®é¢˜**: è®¾ç½®äº† `autoUpdate` æˆ– `crossTreeAutoUpdate` ä½†æ•°æ®æ²¡æœ‰è‡ªåŠ¨æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿åœ¨æ‹–æ‹½äº‹ä»¶å¤„ç†å™¨ä¸­è°ƒç”¨äº† `event.accept()`
- æ£€æŸ¥æ•°æ®æ˜¯å¦ä¸ºå“åº”å¼å¯¹è±¡ï¼ˆä½¿ç”¨ `ref` æˆ– `reactive`ï¼‰
- å¯¹äºè·¨æ ‘æ‹–æ‹½ï¼Œç¡®ä¿ `CrossTreeDataProvider` çš„ `updateTreeData` æ–¹æ³•æ­£ç¡®æ›´æ–°äº†å“åº”å¼æ•°æ®

#### 4. æ€§èƒ½é—®é¢˜

**é—®é¢˜**: å¤§æ•°æ®é‡æ—¶æ€§èƒ½è¾ƒå·®

**è§£å†³æ–¹æ¡ˆ**:
- å¯ç”¨æ‡’åŠ è½½ï¼šè®¾ç½® `lazy="true"`
- ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¦‚æœæ•°æ®é‡ç‰¹åˆ«å¤§ï¼‰
- é¿å…åœ¨èŠ‚ç‚¹æ¨¡æ¿ä¸­ä½¿ç”¨å¤æ‚çš„è®¡ç®—
- è€ƒè™‘åˆ†é¡µæˆ–åˆ†æ‰¹åŠ è½½æ•°æ®

#### 5. æ ·å¼é—®é¢˜

**é—®é¢˜**: æ ·å¼æ˜¾ç¤ºä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿å¯¼å…¥äº†æ ·å¼æ–‡ä»¶ï¼š`import 'vue3-super-tree/style.css'`
- æ£€æŸ¥ CSS ä¼˜å…ˆçº§ï¼Œé¿å…æ ·å¼è¢«è¦†ç›–
- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ£€æŸ¥æ ·å¼åº”ç”¨æƒ…å†µ

### è°ƒè¯•å»ºè®®

#### 1. å¼€å¯è°ƒè¯•æ¨¡å¼

åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œç»„ä»¶ä¼šè¾“å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼š

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯
console.log('Vue3 Super Tree Debug Mode: ON')
```

#### 2. æ£€æŸ¥äº‹ä»¶æµ

ç›‘å¬æ‰€æœ‰ç›¸å…³äº‹ä»¶æ¥è°ƒè¯•é—®é¢˜ï¼š

```vue
<template>
  <Tree
    @node-drop="onNodeDrop"
    @cross-tree-drop="onCrossTreeDrop"
    @cross-tree-drag-start="onDragStart"
    @cross-tree-drag-end="onDragEnd"
  />
</template>

<script setup>
const onNodeDrop = (event) => {
  console.log('Node drop:', event)
}

const onCrossTreeDrop = (event) => {
  console.log('Cross tree drop:', event)
}

const onDragStart = (event) => {
  console.log('Drag start:', event)
}

const onDragEnd = (event) => {
  console.log('Drag end:', event)
}
</script>
```

#### 3. æ•°æ®ç»“æ„éªŒè¯

ç¡®ä¿æ ‘å½¢æ•°æ®ç»“æ„æ­£ç¡®ï¼š

```javascript
// æ­£ç¡®çš„æ•°æ®ç»“æ„
const treeData = [
  {
    key: 'unique-key',      // å¿…é¡»ï¼šå”¯ä¸€æ ‡è¯†
    label: 'Node Label',    // å¿…é¡»ï¼šæ˜¾ç¤ºæ–‡æœ¬
    children: [             // å¯é€‰ï¼šå­èŠ‚ç‚¹æ•°ç»„
      {
        key: 'child-key',
        label: 'Child Node'
      }
    ]
  }
]
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### 1. å¤§æ•°æ®é‡ä¼˜åŒ–

```vue
<template>
  <Tree
    :value="data"
    :lazy="true"
    :loading="loading"
    @node-expand="loadChildren"
  />
</template>

<script setup>
const loadChildren = async (node) => {
  loading.value = true
  try {
    const children = await fetchChildren(node.key)
    node.children = children
  } finally {
    loading.value = false
  }
}
</script>
```

#### 2. å‡å°‘é‡æ¸²æŸ“

```vue
<script setup>
import { computed, shallowRef } from 'vue'

// ä½¿ç”¨ shallowRef å‡å°‘æ·±åº¦å“åº”å¼å¼€é”€
const treeData = shallowRef([])

// ä½¿ç”¨ computed ç¼“å­˜è®¡ç®—ç»“æœ
const filteredData = computed(() => {
  return filterTreeData(treeData.value, searchTerm.value)
})
</script>
```

#### 3. äº‹ä»¶å¤„ç†ä¼˜åŒ–

```vue
<script setup>
// ä½¿ç”¨é˜²æŠ–é¿å…é¢‘ç¹è§¦å‘
import { debounce } from 'lodash-es'

const handleSearch = debounce((searchTerm) => {
  // æœç´¢é€»è¾‘
}, 300)
</script>
```

### ç‰ˆæœ¬å‡çº§æŒ‡å—

#### ä» v1.3.x å‡çº§åˆ° v1.4.0

1. **æ–°å¢åŠŸèƒ½**ï¼š
   - è·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°åŠŸèƒ½
   - `CrossTreeDataProvider` æ¥å£
   - å…¨å±€çŠ¶æ€ç®¡ç†

2. **ç ´åæ€§å˜æ›´**ï¼š
   - æ— ç ´åæ€§å˜æ›´ï¼Œå®Œå…¨å‘åå…¼å®¹

3. **æ¨èæ›´æ–°**ï¼š
   - ä½¿ç”¨æ–°çš„è·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°åŠŸèƒ½æ›¿ä»£æ‰‹åŠ¨å¤„ç†
   - æ›´æ–° TypeScript ç±»å‹å®šä¹‰

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼vue3-super-tree æ˜¯ä¸€ä¸ªå¼€æº npm åŒ…ï¼Œæˆ‘ä»¬æ¬¢è¿ç¤¾åŒºçš„è´¡çŒ®ã€‚

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/zuoanCo/vue3-super-tree.git
cd vue3-super-tree
```

2. **å®‰è£…ä¾èµ–**
```bash
pnpm install
```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
pnpm run dev
```

4. **æ„å»ºåº“æ–‡ä»¶**
```bash
pnpm run build:lib
```

### è´¡çŒ®æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘è§„èŒƒ

- ä½¿ç”¨ TypeScript ç¼–å†™ä»£ç 
- éµå¾ª Vue 3 Composition API æœ€ä½³å®è·µ
- æ·»åŠ é€‚å½“çš„ç±»å‹æ³¨è§£
- ç¼–å†™æ¸…æ™°çš„æ³¨é‡Š
- ç¡®ä¿ä»£ç é€šè¿‡ ESLint æ£€æŸ¥
- æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹

### ä»£ç è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥ï¼š

```bash
# æ£€æŸ¥ä»£ç 
pnpm run lint

# è‡ªåŠ¨ä¿®å¤
pnpm run lint:fix
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](https://github.com/zuoanCo/vue3-super-tree/blob/main/LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## è‡´è°¢

- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [PrimeVue](https://primevue.org/) - åŠŸèƒ½å‚è€ƒæ¥æº
- [Tailwind CSS](https://tailwindcss.com/) - æ ·å¼æ¡†æ¶
- [Lucide](https://lucide.dev/) - å›¾æ ‡åº“
- [Vite](https://vitejs.dev/) - æ„å»ºå·¥å…·

## ğŸ“Š åŒ…ä¿¡æ¯

### ç‰ˆæœ¬ä¿¡æ¯
- **å½“å‰ç‰ˆæœ¬**: v1.4.0 ğŸ†•
- **å‘å¸ƒçŠ¶æ€**: ç”Ÿäº§å°±ç»ª âœ…
- **æ„å»ºçŠ¶æ€**: é€šè¿‡ (44ä¸ªé”™è¯¯å·²ä¿®å¤) âœ…

### æŠ€æœ¯è§„æ ¼
- **åŒ…å¤§å°**: ~220KB (ç”Ÿäº§ä¼˜åŒ–å)
- **æ”¯æŒçš„ Vue ç‰ˆæœ¬**: 3.4+
- **Node.js ç‰ˆæœ¬**: 16.0+
- **TypeScript æ”¯æŒ**: 100% ç±»å‹å®‰å…¨ âœ…
- **Tree Shaking**: å®Œå…¨æ”¯æŒ âœ…
- **SSR æ”¯æŒ**: æœåŠ¡ç«¯æ¸²æŸ“å‹å¥½ âœ…

### åŠŸèƒ½ç‰¹æ€§
- **åŸç”Ÿç„¦ç‚¹ç®¡ç†**: åŸºäºæµè§ˆå™¨åŸç”Ÿ :focus ä¼ªç±» âœ…
- **è‡ªåŠ¨æ‹–æ‹½æ›´æ–°**: åŒæ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–° âœ…
- **è·¨æ ‘æ‹–æ‹½è‡ªåŠ¨æ›´æ–°**: v1.4.0 æ–°å¢åŠŸèƒ½ ğŸ†•
- **å…¨å±€çŠ¶æ€ç®¡ç†**: useCrossTreeDragState âœ…
- **é”™è¯¯å¤„ç†**: å®Œæ•´çš„é”™è¯¯è¾¹ç•Œå’Œæ¢å¤æœºåˆ¶ âœ…
- **æ€§èƒ½ä¼˜åŒ–**: ç”Ÿäº§æ„å»ºè‡ªåŠ¨ä¼˜åŒ– âœ…

### æ„å»ºäº§ç‰©
- **ES æ¨¡å—**: `dist/index.es.js`
- **UMD ç‰ˆæœ¬**: `dist/index.umd.js`
- **ç±»å‹å®šä¹‰**: `dist/index.d.ts`
- **æ ·å¼æ–‡ä»¶**: `dist/style.css`

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª â­ï¸ï¼

[![Star History Chart](https://api.star-history.com/svg?repos=zuoanCo/vue3-super-tree&type=Date)](https://star-history.com/#zuoanCo/vue3-super-tree&Date)